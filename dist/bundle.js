(()=>{"use strict";var e,t,n,o,r,c,a,l,u,i,s,d,m,v,f,p,h,g,y,q,S,E,L;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){var t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/3600),minutes:o,seconds:n}}a();var c=setInterval((function(){a()}),1e3);function a(){var a=r(e);t.textContent=a.hours/10<1?"0"+a.hours:a.hours,n.textContent=a.minutes/10<1?"0"+a.minutes:a.minutes,o.textContent=a.seconds/10<1?"0"+a.seconds:a.seconds,a.timeRemaining<=0&&(t.textContent="00",n.textContent="00",o.textContent="00",clearInterval(c))}setTimeout((function(){var t=r(e),n=(t.hours,t.minutes,r("10 september 2021"));n.hours,n.minutes}),3e3)})("13 september 2021"),L=document.querySelector("menu"),document.querySelector("body").addEventListener("click",(function(e){e.target.closest("a[href]")||e.target.closest(".menu")?function(e){(e.target.closest(".menu")||e.target.closest("menu"))&&L.classList.toggle("active-menu");var t=e.target.closest("a[href]");t&&(e.preventDefault(),function(e){try{var t=document.querySelector(e.getAttribute("href"));t&&t.scrollIntoView({block:"start",behavior:"smooth"})}catch(e){return}}(t))}(e):L.classList.contains("active-menu")&&!e.target.closest("menu")&&L.classList.remove("active-menu")})),y=document.querySelector(".popup"),q=document.querySelectorAll(".popup-btn"),S=document.querySelector(".popup-content"),E=function e(){h=requestAnimationFrame(e),g>39?(g-=5-.073*(105-g),S.style.left=g+"%"):cancelAnimationFrame(h)},q.forEach((function(e){e.addEventListener("click",(function(){y.style.display="block",window.screen.width>=768&&(g=105,S.style.left=g+"%",h=requestAnimationFrame(E))}))})),y.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?y.style.display="none":(t=t.closest(".popup-content"))||(y.style.display="none")})),m=document.querySelector(".service-header"),v=m.querySelectorAll(".service-header-tab"),f=document.querySelectorAll(".service-tab"),(p=function(e){for(var t=0;t<f.length;t++)e===t?(v[t].classList.add("active"),f[t].classList.remove("d-none")):(v[t].classList.remove("active"),f[t].classList.add("d-none"))})(0),m.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&v.forEach((function(e,n){e===t&&p(n)}))})),r=document.querySelector(".portfolio-dots"),c=document.querySelector(".portfolio-content"),a=document.querySelectorAll(".portfolio-item"),l=0,u=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){u(a,l,"portfolio-item-active"),u(o,l,"dot-active"),l=(l+1)%a.length,i(a,l,"portfolio-item-active"),i(o,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;n=setInterval((function(){return s()}),e)},c.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(u(a,l,"portfolio-item-active"),u(o,l,"dot-active"),t.matches("#arrow-right")?l=(l+1)%a.length:t.matches("#arrow-left")?l=(l-1+a.length)%a.length:t.matches(".dot")&&o.forEach((function(e,n){e===t&&(l=n)})),i(a,l,"portfolio-item-active"),i(o,l,"dot-active"))})),c.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(n)})),c.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&d()})),function(){var e='<li class="dot dot-active"></li>';if(a.length>0){for(var t=1;t<a.length;t++)e+='<li class="dot"></li>';r.insertAdjacentHTML("afterbegin",e)}}(),o=document.querySelectorAll(".dot"),d(1500),e=document.querySelector("#command"),t=function(e){if(e.target.matches(".command__photo")){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}},e.addEventListener("mouseover",(function(e){return t(e)})),e.addEventListener("mouseout",(function(e){return t(e)})),function(){var e=/[^0-9]/;document.querySelectorAll(".calc-block>input").forEach((function(t){t.oninput=function(){t.value=t.value.replace(e,"")}}));var t=/[^А-Яа-яЁё\s-]/g,n=/[^А-Яа-яЁё\s-\.\!\?\,\:\;"]/g,o=document.querySelectorAll('[placeholder="Ваше имя"]'),r=document.querySelector('[placeholder="Ваше сообщение"]');o.forEach((function(e){e.oninput=function(){e.value=e.value.replace(t,"")},e.onchange=function(){e.value=e.value.replace(/ +/g," ").trim(),e.value=e.value.replace(/- /g,"-"),e.value=e.value.replace(/ -/g,"-"),e.value=e.value.replace(/-+/g,"-");for(var t=e.value,n="",o=0;o<t.length;o++){if(0===o||o===t.length-1){if("-"===t[o])continue;if(0===o){n=t[o].toLocaleUpperCase();continue}}" "===t[o-1]||"-"===t[o-1]?n+=t[o].toLocaleUpperCase():n+=t[o].toLocaleLowerCase()}e.value=n}})),r.oninput=function(){r.value=r.value.replace(n,"")};var c=/[^A-Za-z0-9\@\_\!\~\*\'\-\.]/g;document.querySelectorAll('[type="email"]').forEach((function(e){e.oninput=function(){e.value=e.value.replace(c,"")},e.onchange=function(){e.value=e.value.match(/\S+@\S+\.\w{2,3}/)}}));var a=/[^0-9\(\)-\+]/g;document.querySelectorAll('[type="tel"]').forEach((function(e){e.oninput=function(){e.value=e.value.replace(a,"")}}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),a=document.getElementById("total"),l=function(){var t,l=1,u=1,i=n.options[n.selectedIndex].value,s=o.value;c.value>1&&(l+=(c.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value<10&&(u*=1.5),t=i&&s?e*i*s*l*u:0;var d=0,m=setInterval((function(){.95*t>d||1.05*t<d?(d=t>d?d+(t-d)/3:d-(d-t)/3,a.textContent=Math.ceil(d)):(clearInterval(m),a.textContent=Math.ceil(t))}),20)};t.addEventListener("change",(function(e){var t=e.target;t.matches("select")?(""===n.options[n.selectedIndex].value&&(o.value="",r.value="",c.value=""),l()):t.matches("input")&&l()}))}(),function(){var e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="font-size: 2rem;";var n,o=document.createElement("img");e.forEach((function(e){var r=e.querySelectorAll("input");e.addEventListener("submit",(function(c){if(c.preventDefault(),e.appendChild(t),t.textContent="",function(e){var t=!0;return e.forEach((function(e){e.value.length<2||e.closest(".form-phone")&&!(12===e.value.length&&"+"===e.value[0]||11===e.value.length&&"+"!==e.value[0])?(e.style.border="2px solid red",t=!1):e.style.border="none"})),t}(r)){"form3"===e.id&&(t.style.color="white"),u=e,o.style.cssText="display: block; position: fixed; \n        top: calc(50% - 80px); left: calc(50% - 80px); width: 160px;",o.setAttribute("src","./images/loading.png"),u.appendChild(o),i=360,o.style.transform="rotate(".concat(i,"deg)"),n=requestAnimationFrame((function e(){n=requestAnimationFrame(e),i-=15,o.style.transform="rotate(".concat(i,"deg)")}));var a=new FormData(e),l={};a.forEach((function(e,t){l[t]=e})),function(e){return fetch("./server.php",{method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-type":"aplication/json"},redirect:"follow",referrer:"client",body:JSON.stringify(e)})}(l).then((function(e){if(200!==e.status)throw new Error("status network not 200");cancelAnimationFrame(n),o.remove(),t.textContent="Отлично! Ответ получен!!!",setTimeout((function(){t.remove(),document.querySelector(".popup").style.display="none"}),2500),r.forEach((function(e){return e.value=""}))})).catch((function(e){t.textContent="Что-то пошло не так:(",console.error(e)}))}else t.textContent="Поле заполнено неверно";var u,i}))}))}()})();