(()=>{"use strict";var e,t,n,o,r,c,a,l,u,i,s,v,d,m,f,h,p,g,y,S,q,L,E,b,A,C;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){var t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/3600),minutes:o,seconds:n}}a();var c=setInterval((function(){a()}),1e3);function a(){var a=r(e);t.textContent=a.hours/10<1?"0"+a.hours:a.hours,n.textContent=a.minutes/10<1?"0"+a.minutes:a.minutes,o.textContent=a.seconds/10<1?"0"+a.seconds:a.seconds,a.timeRemaining<=0&&(t.textContent="00",n.textContent="00",o.textContent="00",clearInterval(c))}setTimeout((function(){var t=r(e),n=(t.hours,t.minutes,r("10 september 2021"));n.hours,n.minutes}),3e3)})("13 september 2021"),C=document.querySelector("menu"),document.querySelector("body").addEventListener("click",(function(e){e.target.closest("a[href]")||e.target.closest(".menu")?function(e){(e.target.closest(".menu")||e.target.closest("menu"))&&C.classList.toggle("active-menu");var t=e.target.closest("a[href]");t&&(e.preventDefault(),function(e){try{var t=document.querySelector(e.getAttribute("href"));t&&t.scrollIntoView({block:"start",behavior:"smooth"})}catch(e){return}}(t))}(e):C.classList.contains("active-menu")&&!e.target.closest("menu")&&C.classList.remove("active-menu")})),L=document.querySelector(".popup"),E=document.querySelectorAll(".popup-btn"),b=document.querySelector(".popup-content"),A=function e(){S=requestAnimationFrame(e),q>39?(q-=5-.073*(105-q),b.style.left=q+"%"):cancelAnimationFrame(S)},E.forEach((function(e){e.addEventListener("click",(function(){L.style.display="block",window.screen.width>=768&&(q=105,b.style.left=q+"%",S=requestAnimationFrame(A))}))})),L.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?L.style.display="none":(t=t.closest(".popup-content"))||(L.style.display="none")})),h=document.querySelector(".service-header"),p=h.querySelectorAll(".service-header-tab"),g=document.querySelectorAll(".service-tab"),(y=function(e){for(var t=0;t<g.length;t++)e===t?(p[t].classList.add("active"),g[t].classList.remove("d-none")):(p[t].classList.remove("active"),g[t].classList.add("d-none"))})(0),h.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&p.forEach((function(e,n){e===t&&y(n)}))})),l=document.querySelector(".portfolio-dots"),u=document.querySelector(".portfolio-content"),i=document.querySelectorAll(".portfolio-item"),s=0,v=function(e,t,n){e[t].classList.remove(n)},d=function(e,t,n){e[t].classList.add(n)},m=function(){v(i,s,"portfolio-item-active"),v(a,s,"dot-active"),s=(s+1)%i.length,d(i,s,"portfolio-item-active"),d(a,s,"dot-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;c=setInterval((function(){return m()}),e)},u.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(v(i,s,"portfolio-item-active"),v(a,s,"dot-active"),t.matches("#arrow-right")?s=(s+1)%i.length:t.matches("#arrow-left")?s=(s-1+i.length)%i.length:t.matches(".dot")&&a.forEach((function(e,n){e===t&&(s=n)})),d(i,s,"portfolio-item-active"),d(a,s,"dot-active"))})),u.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(c)})),u.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&f()})),function(){var e='<li class="dot dot-active"></li>';if(i.length>0){for(var t=1;t<i.length;t++)e+='<li class="dot"></li>';l.insertAdjacentHTML("afterbegin",e)}}(),a=document.querySelectorAll(".dot"),f(1500),o=document.querySelector("#command"),r=function(e){if(e.target.matches(".command__photo")){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}},o.addEventListener("mouseover",(function(e){return r(e)})),o.addEventListener("mouseout",(function(e){return r(e)})),function(){var e=/[^0-9]/;document.querySelectorAll(".calc-block>input").forEach((function(t){t.oninput=function(){t.value=t.value.replace(e,"")}}));var t=/[^А-Яа-яЁё\s-]/g,n=/[^А-Яа-яЁё\s-\.\!\?\,\:\;"]/g,o=document.querySelectorAll('[placeholder="Ваше имя"]'),r=document.querySelector('[placeholder="Ваше сообщение"]');o.forEach((function(e){e.oninput=function(){e.value=e.value.replace(t,"")},e.onchange=function(){e.value=e.value.replace(/ +/g," ").trim(),e.value=e.value.replace(/- /g,"-"),e.value=e.value.replace(/ -/g,"-"),e.value=e.value.replace(/-+/g,"-");for(var t=e.value,n="",o=0;o<t.length;o++){if(0===o||o===t.length-1){if("-"===t[o])continue;if(0===o){n=t[o].toLocaleUpperCase();continue}}" "===t[o-1]||"-"===t[o-1]?n+=t[o].toLocaleUpperCase():n+=t[o].toLocaleLowerCase()}e.value=n}})),r.oninput=function(){r.value=r.value.replace(n,"")};var c=/[^A-Za-z0-9\@\_\!\~\*\'\-\.]/g;document.querySelectorAll('[type="email"]').forEach((function(e){e.oninput=function(){e.value=e.value.replace(c,"")},e.onchange=function(){e.value=e.value.match(/\S+@\S+\.\w{2,3}/)}}));var a=/[^0-9\(\)-\+]/g;document.querySelectorAll('[type="tel"]').forEach((function(e){e.oninput=function(){e.value=e.value.replace(a,"")}}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),a=document.getElementById("total"),l=function(){var t,l=1,u=1,i=n.options[n.selectedIndex].value,s=o.value;c.value>1&&(l+=(c.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value<10&&(u*=1.5),t=i&&s?e*i*s*l*u:0;var v=0,d=setInterval((function(){.95*t>v||1.05*t<v?(v=t>v?v+(t-v)/3:v-(v-t)/3,a.textContent=Math.ceil(v)):(clearInterval(d),a.textContent=Math.ceil(t))}),20)};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l()}))}(),e=function(e){var t=!0;return e.forEach((function(e){e.value.length<2||e.closest(".form-phone")&&!(12===e.value.length&&"+"===e.value[0]||11===e.value.length&&"+"!==e.value[0])?(e.style.border="2px solid red",t=!1):e.style.border="none"})),t},t=document.querySelectorAll("form"),(n=document.createElement("div")).style.cssText="font-size: 2rem;",t.forEach((function(t){var o=t.querySelectorAll("input");t.addEventListener("submit",(function(r){if(r.preventDefault(),t.appendChild(n),console.log(e(o)),e(o)){n.textContent="Загрузка...";var c=new FormData(t),a={};c.forEach((function(e,t){a[t]=e})),function(e){return fetch("./server.php",{method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-type":"aplication/json"},redirect:"follow",referrer:"client",body:JSON.stringify(e)})}(a).then((function(e){if(200!==e.status)throw new Error("status network not 200");n.textContent="Отлично! Ответ получен!",o.forEach((function(e){return e.value=""}))})).catch((function(e){n.textContent="Что-то пошло не так",console.error(e)}))}else n.textContent="Поле заполнено неверно"}))}))})();